#:import Factory kivy.factory.Factory
# Import the Factory module to create Popup instances dynamically

#:import NewGame newgame.NewGame
# Import the NewGame class from the newgame module

<VolPopup@Popup>:
    auto_dismiss: True  # The popup will close when clicking outside of it
    size_hint: (.5, .3)  # Size of the popup as a fraction of the window
    title: 'Volume'  # Title of the popup

    BoxLayout:
        orientation: 'vertical'  # Arrange widgets vertically

        Label:
            text: "Music"  # Label text
            font_name: 'fonts/Caribbean.ttf'  # Custom font for the label

        Slider:
            id: slider  # ID for the slider to reference it
            value_track: True  # Show the value track
            value_track_color: [0, 0, 1, 1]  # Blue color for the value track
            min: 0  # Minimum value for the slider
            max: 1  # Maximum value for the slider
            value: 0.5  # Default value for the slider
            on_value: app.change_volume(self.value)  # Change volume on slider value change

<HoF>:
    # Placeholder for the Hall of Fame screen

<CredPopup@Popup>:
    auto_dismiss: True  # Close the popup when clicking outside
    size_hint: (.6, .6)  # Popup size as a fraction of the window

    title: 'Credits'  # Title of the popup

    Label:
        text: app.get_file_content('texts/Credits.txt')  # Load credits text from a file
        font_name: 'fonts/Caribbean.ttf'  # Custom font for the label

<HomePage>:
    name: 'homepage'  # Assign a name to the HomePage screen

    FloatLayout:
        # Use FloatLayout for flexible positioning
        
        Image:
            source: 'images/Default_pirate_ship_3.jpg'  # Background image
            allow_stretch: True  # Allow image to stretch
            keep_ratio: False  # Do not maintain aspect ratio
            size_hint: (1, 1)  # Cover the entire layout
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}  # Center the image

        BoxLayout:
            orientation: 'vertical'  # Arrange buttons vertically
            pos_hint: {'center_x': 0.5, 'center_y': 0.5}  # Center the box layout
            size_hint: (1, .5)  # Size hint for the box layout

            Button:
                text: 'New Game'  # Text on the button
                color: 0, 0, 0, 1  # Black text color
                font_size: 52  # Font size for the button text
                font_name: 'fonts/Caribbean.ttf'  # Custom font
                background_color: 0, 0, 0, 0  # Transparent background
                on_press:
                    app.add_screen(NewGame, 'newgame')  # Add NewGame screen dynamically
                    app.root.current = 'newgame'  # Switch to NewGame screen

            Button:
                text: 'Load Game'  # Text on the button
                color: 0, 0, 0, 1  # Black text color
                font_size: 52  # Font size for the button text
                font_name: 'fonts/Caribbean.ttf'  # Custom font
                background_color: 0, 0, 0, 0  # Transparent background
                on_press: app.root.current = 'loadgame'  # Switch to LoadGame screen

            Button:
                text: 'Quit'  # Text on the button
                color: 0, 0, 0, 1  # Black text color
                font_size: 34  # Font size for the button text
                font_name: 'fonts/Caribbean.ttf'  # Custom font
                background_color: 0, 0, 0, 0  # Transparent background
                on_press: app.stop()  # Stop the app

        BoxLayout:
            orientation: 'horizontal'  # Arrange buttons horizontally
            pos_hint: {'center_x': 0.5, 'center_y': .05}  # Position at the bottom center
            size_hint: (.3, .1)  # Size hint for the box layout

            Button:
                background_color: 0, 0, 0, 0  # Transparent background
                on_press: app.root.current = 'start'  # Switch to Start screen
                Image:
                    source: 'images/homeButton.png'  # Home button image
                    center_x: self.parent.center_x  # Center image horizontally
                    center_y: self.parent.center_y  # Center image vertically
                    size: 50, 50  # Size of the image

            Button:
                background_color: 0, 0, 0, 0  # Transparent background
                on_press: Factory.VolPopup().open()  # Open the volume popup
                Image:
                    source: 'images/volumeButton.webp'  # Volume button image
                    center_x: self.parent.center_x  # Center image horizontally
                    center_y: self.parent.center_y  # Center image vertically
                    size: 50, 50  # Size of the image

            Button:
                background_color: 0, 0, 0, 0  # Transparent background
                on_press: root.open_Hof_popup()  # Open Hall of Fame popup (placeholder)
                Image:
                    source: 'images/hofButton.webp'  # Hall of Fame button image
                    center_x: self.parent.center_x  # Center image horizontally
                    center_y: self.parent.center_y  # Center image vertically
                    size: 50, 50  # Size of the image

            Button:
                background_color: 0, 0, 0, 0  # Transparent background
                on_press: Factory.CredPopup().open()  # Open the credits popup
                Image:
                    source: 'images/creditButton.png'  # Credits button image
                    center_x: self.parent.center_x  # Center image horizontally
                    center_y: self.parent.center_y  # Center image vertically
                    size: 50, 50  # Size of the image
